{"ast":null,"code":"import axios from 'axios';\nconst axiosInstance = axios.create({\n  baseURL: 'http://localhost:5000/api'\n});\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxiosInstance.interceptors.response.use(response => response, async error => {\n  const originalRequest = error.config;\n  if (error.response.status === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    const refreshToken = localStorage.getItem('refreshToken');\n    const response = await axiosInstance.post('/refresh_token', {\n      token: refreshToken\n    });\n    localStorage.setItem('token', response.data.access_token);\n    originalRequest.headers.Authorization = `Bearer ${response.data.access_token}`;\n    return axiosInstance(originalRequest);\n  }\n  return Promise.reject(error);\n});\nexport default axiosInstance;","map":{"version":3,"names":["axios","axiosInstance","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","originalRequest","status","_retry","refreshToken","post","setItem","data","access_token"],"sources":["/home/coapr/development/projects/patent/client/src/utils/axiosInstance.js"],"sourcesContent":["import axios from 'axios';\n\nconst axiosInstance = axios.create({\n  baseURL: 'http://localhost:5000/api',\n});\n\naxiosInstance.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, (error) => {\n  return Promise.reject(error);\n});\n\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n    if (error.response.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n      const refreshToken = localStorage.getItem('refreshToken');\n      const response = await axiosInstance.post('/refresh_token', { token: refreshToken });\n      localStorage.setItem('token', response.data.access_token);\n      originalRequest.headers.Authorization = `Bearer ${response.data.access_token}`;\n      return axiosInstance(originalRequest);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAM,CAAC;EACjCC,OAAO,EAAE;AACX,CAAC,CAAC;AAEFF,aAAa,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACjD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,UAAUJ,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EAAGM,KAAK,IAAK;EACZ,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AAEFZ,aAAa,CAACG,YAAY,CAACY,QAAQ,CAACV,GAAG,CACpCU,QAAQ,IAAKA,QAAQ,EACtB,MAAOH,KAAK,IAAK;EACf,MAAMI,eAAe,GAAGJ,KAAK,CAACN,MAAM;EACpC,IAAIM,KAAK,CAACG,QAAQ,CAACE,MAAM,KAAK,GAAG,IAAI,CAACD,eAAe,CAACE,MAAM,EAAE;IAC5DF,eAAe,CAACE,MAAM,GAAG,IAAI;IAC7B,MAAMC,YAAY,GAAGX,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IACzD,MAAMM,QAAQ,GAAG,MAAMf,aAAa,CAACoB,IAAI,CAAC,gBAAgB,EAAE;MAAEb,KAAK,EAAEY;IAAa,CAAC,CAAC;IACpFX,YAAY,CAACa,OAAO,CAAC,OAAO,EAAEN,QAAQ,CAACO,IAAI,CAACC,YAAY,CAAC;IACzDP,eAAe,CAACN,OAAO,CAACC,aAAa,GAAG,UAAUI,QAAQ,CAACO,IAAI,CAACC,YAAY,EAAE;IAC9E,OAAOvB,aAAa,CAACgB,eAAe,CAAC;EACvC;EACA,OAAOH,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeZ,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module"}